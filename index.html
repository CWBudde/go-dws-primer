<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Interactive educational programming environment for learning DWScript/Object Pascal">
  <title>DWScript Primer - Learn Object Pascal Interactively</title>
  <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="app-header">
      <div class="header-left">
        <h1 class="logo">DWScript Primer</h1>
        <nav class="main-nav">
          <button id="btn-lessons" class="nav-btn active">Lessons</button>
          <button id="btn-examples" class="nav-btn">Examples</button>
          <button id="btn-challenges" class="nav-btn">Challenges</button>
          <button id="btn-playground" class="nav-btn">Playground</button>
        </nav>
      </div>
      <div class="header-right">
        <button id="btn-share" class="icon-btn" title="Share Code">
          <span class="icon">üîó</span>
        </button>
        <button id="btn-settings" class="icon-btn" title="Settings">
          <span class="icon">‚öôÔ∏è</span>
        </button>
        <button id="btn-theme" class="icon-btn" title="Toggle Theme">
          <span class="icon">üåì</span>
        </button>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="app-main">
      <!-- Sidebar for Lessons/Examples Navigation -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <h2>Lessons</h2>
          <input type="search" id="lesson-search" placeholder="Search lessons..." class="search-input">
        </div>
        <div id="lesson-list" class="lesson-list">
          <!-- Lesson navigation will be populated here -->
        </div>
      </aside>

      <!-- Resizable Divider -->
      <div class="resizer" id="sidebar-resizer"></div>

      <!-- Content Area -->
      <div class="content-area">
        <!-- Lesson/Instructions Panel -->
        <section id="lesson-panel" class="lesson-panel">
          <div class="lesson-content">
            <h2>Welcome to DWScript Primer</h2>
            <p>Start learning Object Pascal interactively with immediate feedback!</p>
            <p>Select a lesson from the sidebar to begin, or jump straight to the playground to experiment.</p>
          </div>
        </section>

        <!-- Resizable Divider -->
        <div class="resizer horizontal" id="lesson-resizer"></div>

        <!-- Editor and Output Area -->
        <div class="workspace">
          <!-- Editor Section -->
          <section class="editor-section">
            <div class="panel-header">
              <h3>Code Editor</h3>
              <div class="toolbar">
                <button id="btn-run" class="btn btn-primary" title="Run Code (Ctrl+Enter)">
                  <span class="icon">‚ñ∂Ô∏è</span> Run
                </button>
                <button id="btn-stop" class="btn btn-secondary" title="Stop Execution" disabled>
                  <span class="icon">‚èπÔ∏è</span> Stop
                </button>
                <button id="btn-clear" class="btn btn-secondary" title="Clear Output">
                  <span class="icon">üóëÔ∏è</span> Clear
                </button>
                <button id="btn-format" class="btn btn-secondary" title="Format Code">
                  <span class="icon">‚ú®</span> Format
                </button>
              </div>
            </div>
            <div id="editor-container" class="editor-container"></div>
          </section>

          <!-- Resizable Divider -->
          <div class="resizer vertical" id="editor-resizer"></div>

          <!-- Output Section -->
          <section class="output-section">
            <div class="panel-header">
              <div class="tabs">
                <button class="tab active" data-tab="console">Console</button>
                <button class="tab" data-tab="compiler">Compiler</button>
                <button class="tab" data-tab="graphics">Graphics</button>
              </div>
            </div>
            <div class="output-container">
              <div id="output-console" class="output-panel active">
                <div class="output-content"></div>
              </div>
              <div id="output-compiler" class="output-panel">
                <div class="output-content"></div>
              </div>
              <div id="output-graphics" class="output-panel">
                <canvas id="turtle-canvas" width="600" height="600"></canvas>
                <div class="graphics-controls">
                  <button id="btn-clear-canvas" class="btn btn-sm">Clear</button>
                  <button id="btn-export-canvas" class="btn btn-sm">Export PNG</button>
                  <label>
                    Speed:
                    <input type="range" id="turtle-speed" min="1" max="10" value="5">
                  </label>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>

    <!-- Status Bar -->
    <footer class="status-bar">
      <div class="status-left">
        <span id="status-message">Ready</span>
      </div>
      <div class="status-right">
        <span id="memory-usage" title="Memory usage"></span>
        <span id="execution-time"></span>
        <span id="performance-metrics" title="Click for detailed metrics" style="cursor: pointer;"></span>
        <span id="cursor-position">Ln 1, Col 1</span>
      </div>
    </footer>
  </div>

  <!-- Modals will be injected here -->
  <div id="modal-container"></div>

  <!-- Loading Indicator -->
  <div id="loading" class="loading-overlay">
    <div class="spinner"></div>
    <p>Loading DWScript Runtime...</p>
  </div>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
